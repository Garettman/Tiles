<!DOCTYPE html>
<html>
<head>
  <title>Manicouagan-tiles - LeafLet Preview</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/@turf/turf/turf.min.js"></script>
  <script src="https://unpkg.com/proj4"></script>
<script src="https://unpkg.com/proj4leaflet"></script>

</head>
<body>
  <div id="map" style="position: absolute; top: 10px; bottom: 10px; left: 10px; right: 10px;"></div>
  <script>
    document.addEventListener('DOMContentLoaded', function () {

  var map = L.map('map', {
    center: [-0.01762765240463414, 0.010536716578844382],
    minZoom: 0,
    maxZoom: 23,
    maxBounds: [
        [-90, -180],
        [90, 180]
    ]
  });

  var baselayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 23,
    attribution: 'Map data &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors; Squad SDK.'
  }).addTo(map);


  // Ajoutez un élément HTML pour afficher les coordonnées
  var coordDiv = L.control();

coordDiv.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'coordDiv'); // create a div with a class "coordDiv"
    this.update();
    return this._div;
};

coordDiv.update = function (str) {
    this._div.innerHTML = str;
};

coordDiv.addTo(map);

map.on('mousemove', function(e) {
    var coord = e.latlng;
    var lat = coord.lat;
    var lng = coord.lng;
    coordDiv.update("Vous êtes à la latitude " + lat + " et à la longitude " + lng);
});


map.setView([-0.01762765240463414, 0.010536716578844382], 14.0);



var center = map.getCenter();
var distance = 2032.5 / 1000; // convert to kilometers for turf
var bearing = 90; // in degrees, where 0 is north, 90 is east, etc.

// Convert the center to a turf point
var centerPoint = turf.point([center.lng, center.lat]);

// Calculate the destination point
var destinationPoint = turf.destination(centerPoint, distance, bearing);

// Get the coordinates of the destination point
var destinationCoordinates = destinationPoint.geometry.coordinates;
console.log("Destination coordinates: ", destinationCoordinates);
L.marker([destinationCoordinates[1], destinationCoordinates[0]]).addTo(map);



// Calculate the length of the diagonal
var diagonal = Math.sqrt(2 * Math.pow(distance, 2));

// Calculate the bearing of the diagonal (45 degrees for top right corner)
var bearing = 45;

// Calculate the coordinates of the top right corner
var cornerPoint = turf.destination(centerPoint, diagonal, bearing);
var cornerCoordinates = cornerPoint.geometry.coordinates;

// Log the corner coordinates
console.log("Corner coordinates: ", cornerCoordinates);

// Add a marker at the corner coordinates
L.marker([cornerCoordinates[1], cornerCoordinates[0]]).addTo(map);


// Calculate the bearing of the diagonal (225 degrees for bottom left corner)
var bearing = 225;

// Calculate the coordinates of the bottom left corner
var oppositeCornerPoint = turf.destination(centerPoint, diagonal, bearing);
var oppositeCornerCoordinates = oppositeCornerPoint.geometry.coordinates;

// Log the corner coordinates
console.log("Opposite corner coordinates: ", oppositeCornerCoordinates);

// Add a marker at the corner coordinates
L.marker([oppositeCornerCoordinates[1], oppositeCornerCoordinates[0]]).addTo(map);

var bounds = L.latLngBounds(
  L.latLng(cornerCoordinates[1], cornerCoordinates[0]),
  L.latLng(oppositeCornerCoordinates[1], oppositeCornerCoordinates[0])
);


var mytile = L.tileLayer('./Manicouagan-tiles/{z}/{x}/{y}.png', {
    minZoom:0,
    maxZoom: 23,
    tms: false,
    bounds: bounds,
    attribution: 'Generated by Wolkar le Zin',
  }).addTo(map);

  L.control.layers({'Basemap':baselayer},{'Manicouagan-tiles':mytile}).addTo(map);
});
  </script>
</body>
</html>